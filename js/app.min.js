document.addEventListener("DOMContentLoaded",function(){const e=new SPARouter("conteudo-principal");e.initAccessibility(),e.initThemeToggles()});class SPARouter{constructor(e){this.rootElem=document.getElementById(e)||document.querySelector("main"),this.routes={},document.addEventListener("click",this.handleLinkClick.bind(this)),this.formValidator=new FormValidator}addRoute(e,t){this.routes[e]=t}loadContent(e){const t=this.routes[e];t&&(this.rootElem.innerHTML=t)}navigate(e){window.history.pushState({},e,window.location.origin+e),this.loadContent(e)}handleLinkClick(e){if(e.target.matches("a")){const t=e.target.getAttribute("href");t.startsWith("/")||t.startsWith("#")||(e.preventDefault(),this.navigate(t))}}initAccessibility(){const e=document.getElementById("menuToggle"),t=document.getElementById("menu");e&&t&&(e.addEventListener("click",function(){const n="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!n),n?t.classList.remove("active"):t.classList.add("active")}),document.addEventListener("keydown",function(n){("Escape"===n.key||"Esc"===n.key)&&"true"===e.getAttribute("aria-expanded")&&(e.setAttribute("aria-expanded","false"),t.classList.remove("active"))}))}initThemeToggles(){const e=document.getElementById("darkModeToggle"),t=document.getElementById("highContrastToggle"),n=window.matchMedia("(prefers-color-scheme: dark)");let o=localStorage.getItem("darkMode")||"auto",a=localStorage.getItem("highContrast")||"false";"auto"===o&&(o=n.matches?"true":"false"),"true"===o&&document.body.classList.add("dark-mode"),"true"===a&&document.body.classList.add("high-contrast"),e&&e.addEventListener("click",function(){document.body.classList.toggle("dark-mode");const t=document.body.classList.contains("dark-mode");localStorage.setItem("darkMode",t?"true":"false")}),t&&t.addEventListener("click",function(){document.body.classList.toggle("high-contrast");const e=document.body.classList.contains("high-contrast");localStorage.setItem("highContrast",e?"true":"false")})}}class FormValidator{constructor(){this.patterns={email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,cpf:/^\d{3}\.\d{3}\.\d{3}-\d{2}$/,phone:/^\(\d{2}\)\s\d{4,5}-\d{4}$/}}validate(e,t){return this.patterns[t]?this.patterns[t].test(e):null}}